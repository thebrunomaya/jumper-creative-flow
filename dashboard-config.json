{
  "_meta": {
    "description": "Configuração de dashboards alinhada com objetivos do Notion DB_Contas",
    "version": "2.0.0",
    "created": "2025-09-01",
    "last_updated": "2025-09-01"
  },
  
  "dashboards": {
    
    "geral": {
      "name": "Dashboard Geral",
      "description": "Visão consolidada de todas as campanhas",
      "objectives_match": ["*"], 
      "status": "implemented",
      "metrics": {
        "spend_total": {
          "name": "Investimento Total",
          "priority": 10,
          "is_hero": true,
          "database_field": "spend",
          "aggregation": "sum",
          "format": "currency",
          "description": "Soma de todos os gastos no período"
        },
        "reach_total": {
          "name": "Alcance Total",
          "priority": 9,
          "is_hero": true,
          "database_field": "reach",
          "aggregation": "sum_unique",
          "format": "number",
          "description": "Pessoas únicas alcançadas"
        },
        "impressions_total": {
          "name": "Impressões Totais",
          "priority": 8,
          "is_hero": true,
          "database_field": "impressions",
          "aggregation": "sum",
          "format": "number",
          "description": "Total de visualizações"
        },
        "ctr_global": {
          "name": "CTR Médio",
          "priority": 7,
          "is_hero": false,
          "calculation": "(sum(link_clicks) / sum(impressions)) * 100",
          "format": "percentage",
          "description": "Taxa de cliques média ponderada"
        },
        "cpc_medio": {
          "name": "CPC Médio",
          "priority": 6,
          "is_hero": false,
          "calculation": "sum(spend) / sum(link_clicks)",
          "format": "currency",
          "description": "Custo por clique consolidado"
        },
        "cpm_medio": {
          "name": "CPM Médio",
          "priority": 6,
          "is_hero": false,
          "calculation": "(sum(spend) / sum(impressions)) * 1000",
          "format": "currency",
          "description": "Custo por mil impressões"
        }
      }
    },

    "vendas": {
      "name": "Dashboard de Vendas",
      "description": "Análise de conversões de vendas e ROAS",
      "objectives_match": ["Vendas"],
      "status": "implemented",
      "metrics": {
        "vendas_realizadas": {
          "name": "Vendas Realizadas",
          "priority": 10,
          "is_hero": true,
          "database_field": "actions_purchase",
          "format": "number",
          "description": "Total de vendas concluídas"
        },
        "receita": {
          "name": "Receita Total",
          "priority": 10,
          "is_hero": true,
          "database_field": "action_values_omni_purchase",
          "format": "currency",
          "description": "Valor total das vendas"
        },
        "roas": {
          "name": "ROAS",
          "priority": 10,
          "is_hero": true,
          "calculation": "action_values_omni_purchase / spend",
          "format": "decimal",
          "suffix": "x",
          "description": "Retorno sobre investimento em ads",
          "thresholds": {
            "excellent": ">= 4.0",
            "good": ">= 2.5",
            "warning": ">= 1.5",
            "critical": "< 1.5"
          }
        },
        "cpa_venda": {
          "name": "CPA (Custo por Venda)",
          "priority": 9,
          "is_hero": false,
          "calculation": "spend / actions_purchase",
          "format": "currency",
          "description": "Custo por aquisição de cliente"
        },
        "ticket_medio": {
          "name": "Ticket Médio",
          "priority": 8,
          "is_hero": false,
          "calculation": "action_values_omni_purchase / actions_purchase",
          "format": "currency",
          "description": "Valor médio por venda"
        }
      }
    },

    "conversoes": {
      "name": "Dashboard de Conversões",
      "description": "Análise geral de conversões customizadas",
      "objectives_match": ["Conversões"],
      "status": "implemented",
      "metrics": {
        "conversoes_total": {
          "name": "Total de Conversões",
          "priority": 10,
          "is_hero": true,
          "database_field": "actions_onsite_conversion_post_save",
          "format": "number",
          "description": "Todas as conversões rastreadas"
        },
        "valor_conversoes": {
          "name": "Valor das Conversões",
          "priority": 10,
          "is_hero": true,
          "database_field": "action_values_omni_purchase",
          "format": "currency",
          "description": "Valor monetário das conversões"
        },
        "cpa": {
          "name": "CPA",
          "priority": 9,
          "is_hero": true,
          "calculation": "spend / actions_onsite_conversion_post_save",
          "format": "currency",
          "description": "Custo por conversão"
        },
        "taxa_conversao": {
          "name": "Taxa de Conversão",
          "priority": 8,
          "is_hero": false,
          "calculation": "(actions_onsite_conversion_post_save / link_clicks) * 100",
          "format": "percentage",
          "description": "% de cliques que convertem"
        }
      }
    },

    "trafego": {
      "name": "Dashboard de Tráfego",
      "description": "Análise de geração de tráfego qualificado",
      "objectives_match": ["Tráfego"],
      "status": "implemented",
      "metrics": {
        "cliques_link": {
          "name": "Cliques no Link",
          "priority": 10,
          "is_hero": true,
          "database_field": "link_clicks",
          "format": "number",
          "description": "Total de cliques direcionados"
        },
        "cpc": {
          "name": "CPC",
          "priority": 10,
          "is_hero": true,
          "calculation": "spend / link_clicks",
          "format": "currency",
          "description": "Custo por clique no link",
          "thresholds": {
            "excellent": "<= 0.80",
            "good": "<= 1.50",
            "warning": "<= 2.50",
            "critical": "> 2.50"
          }
        },
        "ctr": {
          "name": "CTR do Link",
          "priority": 9,
          "is_hero": true,
          "calculation": "(link_clicks / impressions) * 100",
          "format": "percentage",
          "description": "Taxa de cliques no link",
          "thresholds": {
            "excellent": ">= 2.0",
            "good": ">= 1.2",
            "warning": ">= 0.8",
            "critical": "< 0.8"
          }
        },
        "landing_page_views": {
          "name": "Visualizações da Página",
          "priority": 8,
          "is_hero": false,
          "database_field": "actions_landing_page_view",
          "format": "number",
          "description": "Páginas carregadas após clique"
        },
        "bounce_rate": {
          "name": "Taxa de Rejeição",
          "priority": 7,
          "is_hero": false,
          "calculation": "1 - (actions_landing_page_view / link_clicks)",
          "format": "percentage",
          "description": "% que não carregou a página"
        }
      }
    },

    "engajamento": {
      "name": "Dashboard de Engajamento",
      "description": "Análise de interações com conteúdo",
      "objectives_match": ["Engajamento"],
      "status": "implemented",
      "metrics": {
        "engajamento_total": {
          "name": "Engajamento Total",
          "priority": 10,
          "is_hero": true,
          "database_field": "actions_post_engagement",
          "format": "number",
          "description": "Todas as interações com posts"
        },
        "reacoes": {
          "name": "Reações",
          "priority": 9,
          "is_hero": true,
          "database_field": "actions_post_reaction",
          "format": "number",
          "description": "Curtidas e reações"
        },
        "comentarios": {
          "name": "Comentários",
          "priority": 9,
          "is_hero": true,
          "database_field": "actions_comment",
          "format": "number",
          "description": "Comentários nos posts"
        },
        "compartilhamentos": {
          "name": "Compartilhamentos",
          "priority": 8,
          "is_hero": false,
          "database_field": "actions_post",
          "format": "number",
          "description": "Posts compartilhados"
        },
        "taxa_engajamento": {
          "name": "Taxa de Engajamento",
          "priority": 8,
          "is_hero": false,
          "calculation": "(actions_post_engagement / reach) * 100",
          "format": "percentage",
          "description": "% de pessoas que interagiram"
        },
        "cpe": {
          "name": "Custo por Engajamento",
          "priority": 7,
          "is_hero": false,
          "calculation": "spend / actions_post_engagement",
          "format": "currency",
          "description": "Investimento por interação"
        }
      }
    },

    "seguidores": {
      "name": "Dashboard de Seguidores",
      "description": "Crescimento de base de seguidores",
      "objectives_match": ["Seguidores"],
      "status": "implemented",
      "metrics": {
        "page_likes": {
          "name": "Curtidas na Página",
          "priority": 10,
          "is_hero": true,
          "database_field": "actions_like",
          "format": "number",
          "description": "Novas curtidas/seguidores"
        },
        "custo_seguidor": {
          "name": "Custo por Seguidor",
          "priority": 10,
          "is_hero": true,
          "calculation": "spend / actions_like",
          "format": "currency",
          "description": "Investimento por novo seguidor"
        },
        "taxa_conversao_seguidor": {
          "name": "Taxa de Conversão",
          "priority": 8,
          "is_hero": false,
          "calculation": "(actions_like / reach) * 100",
          "format": "percentage",
          "description": "% que virou seguidor"
        }
      }
    },

    "reconhecimento": {
      "name": "Dashboard de Reconhecimento",
      "description": "Visibilidade e awareness de marca",
      "objectives_match": ["Reconhecimento"],
      "status": "implemented",
      "metrics": {
        "alcance": {
          "name": "Alcance",
          "priority": 10,
          "is_hero": true,
          "database_field": "reach",
          "format": "number",
          "description": "Pessoas únicas alcançadas"
        },
        "impressoes": {
          "name": "Impressões",
          "priority": 9,
          "is_hero": true,
          "database_field": "impressions",
          "format": "number",
          "description": "Total de visualizações"
        },
        "frequencia": {
          "name": "Frequência",
          "priority": 9,
          "is_hero": true,
          "database_field": "frequency",
          "format": "decimal",
          "description": "Média de vezes vista",
          "thresholds": {
            "excellent": "3.0 - 5.0",
            "good": "2.0 - 3.0 ou 5.0 - 7.0",
            "warning": "1.0 - 2.0 ou 7.0 - 10.0",
            "critical": "> 10.0"
          }
        },
        "cpm": {
          "name": "CPM",
          "priority": 8,
          "is_hero": false,
          "calculation": "(spend / impressions) * 1000",
          "format": "currency",
          "description": "Custo por mil impressões"
        }
      }
    },

    "video": {
      "name": "Dashboard de Vídeo",
      "description": "Performance de conteúdo em vídeo",
      "objectives_match": ["Vídeo"],
      "status": "implemented",
      "metrics": {
        "video_views": {
          "name": "Reproduções de Vídeo",
          "priority": 10,
          "is_hero": true,
          "database_field": "video_play_actions_video_view",
          "format": "number",
          "description": "Total de plays iniciados"
        },
        "thruplay": {
          "name": "ThruPlay",
          "priority": 10,
          "is_hero": true,
          "database_field": "video_thruplay_watched_actions_video_view",
          "format": "number",
          "description": "Vídeos assistidos 15s ou até o fim"
        },
        "video_50": {
          "name": "50% Assistido",
          "priority": 9,
          "is_hero": true,
          "database_field": "video_p50_watched_actions_video_view",
          "format": "number",
          "description": "Metade do vídeo vista"
        },
        "video_95": {
          "name": "95% Assistido",
          "priority": 8,
          "is_hero": false,
          "database_field": "video_p95_watched_actions_video_view",
          "format": "number",
          "description": "Quase completo"
        },
        "taxa_retencao": {
          "name": "Taxa de Retenção",
          "priority": 8,
          "is_hero": false,
          "calculation": "(video_p95_watched_actions_video_view / video_play_actions_video_view) * 100",
          "format": "percentage",
          "description": "% que assistiu quase tudo"
        },
        "cpv": {
          "name": "CPV (Custo por View)",
          "priority": 7,
          "is_hero": false,
          "calculation": "spend / video_thruplay_watched_actions_video_view",
          "format": "currency",
          "description": "Custo por ThruPlay"
        }
      }
    },

    "direcoes": {
      "name": "Dashboard de Direções",
      "description": "Rotas e visitas a estabelecimento físico",
      "objectives_match": ["Direções"],
      "status": "coming_soon",
      "metrics": {
        "get_directions": {
          "name": "Direções Solicitadas",
          "priority": 10,
          "is_hero": true,
          "database_field": "actions_get_directions",
          "format": "number",
          "description": "Rotas traçadas para o local"
        },
        "custo_direcao": {
          "name": "Custo por Direção",
          "priority": 9,
          "is_hero": true,
          "calculation": "spend / actions_get_directions",
          "format": "currency",
          "description": "Investimento por rota"
        }
      }
    },

    "conversas": {
      "name": "Dashboard de Conversas",
      "description": "Mensagens e conversas iniciadas",
      "objectives_match": ["Conversas"],
      "status": "implemented",
      "metrics": {
        "conversas_iniciadas": {
          "name": "Conversas Iniciadas",
          "priority": 10,
          "is_hero": true,
          "database_field": "actions_onsite_conversion_messaging_conversation_started_7d",
          "format": "number",
          "description": "Chats iniciados em 7 dias"
        },
        "custo_conversa": {
          "name": "Custo por Conversa",
          "priority": 10,
          "is_hero": true,
          "calculation": "spend / actions_onsite_conversion_messaging_conversation_started_7d",
          "format": "currency",
          "description": "Investimento por chat"
        },
        "taxa_conversa": {
          "name": "Taxa de Conversa",
          "priority": 8,
          "is_hero": false,
          "calculation": "(actions_onsite_conversion_messaging_conversation_started_7d / reach) * 100",
          "format": "percentage",
          "description": "% que iniciou conversa"
        }
      }
    },

    "cadastros": {
      "name": "Dashboard de Cadastros",
      "description": "Geração de leads e cadastros",
      "objectives_match": ["Cadastros"],
      "status": "implemented",
      "metrics": {
        "leads_gerados": {
          "name": "Cadastros Realizados",
          "priority": 10,
          "is_hero": true,
          "database_field": "actions_lead",
          "format": "number",
          "description": "Total de leads capturados"
        },
        "cpl": {
          "name": "CPL (Custo por Lead)",
          "priority": 10,
          "is_hero": true,
          "calculation": "spend / actions_lead",
          "format": "currency",
          "description": "Investimento por cadastro",
          "thresholds": {
            "excellent": "<= 25.00",
            "good": "<= 50.00",
            "warning": "<= 100.00",
            "critical": "> 100.00"
          }
        },
        "registros_completos": {
          "name": "Registros Completos",
          "priority": 9,
          "is_hero": false,
          "database_field": "actions_complete_registration",
          "format": "number",
          "description": "Cadastros finalizados"
        },
        "taxa_conversao_lead": {
          "name": "Taxa de Conversão",
          "priority": 8,
          "is_hero": false,
          "calculation": "(actions_lead / link_clicks) * 100",
          "format": "percentage",
          "description": "% de cliques que viram lead"
        }
      }
    },

    "aplicativo": {
      "name": "Dashboard de Aplicativo",
      "description": "Instalações e ativações de app",
      "objectives_match": ["Aplicativo"],
      "status": "coming_soon",
      "metrics": {
        "app_installs": {
          "name": "Instalações",
          "priority": 10,
          "is_hero": true,
          "database_field": "actions_app_install",
          "format": "number",
          "description": "Downloads do aplicativo"
        },
        "cpi": {
          "name": "CPI (Custo por Instalação)",
          "priority": 10,
          "is_hero": true,
          "calculation": "spend / actions_app_install",
          "format": "currency",
          "description": "Investimento por download"
        }
      }
    }
  },

  "metric_groups": {
    "funnel_ecommerce": {
      "name": "Funil E-commerce",
      "metrics": [
        "actions_view_content",
        "actions_add_to_cart",
        "actions_initiate_checkout",
        "actions_add_payment_info",
        "actions_purchase"
      ],
      "visualization": "funnel"
    },
    "video_retention": {
      "name": "Retenção de Vídeo",
      "metrics": [
        "video_play_actions_video_view",
        "video_p25_watched_actions_video_view",
        "video_p50_watched_actions_video_view",
        "video_p75_watched_actions_video_view",
        "video_p95_watched_actions_video_view"
      ],
      "visualization": "line"
    }
  },

  "adaptive_thresholds": {
    "enabled": true,
    "factors": {
      "nicho": {
        "ecommerce": { "roas_min": 3.0, "cpa_max": 80 },
        "infoproduto": { "roas_min": 5.0, "cpa_max": 150 },
        "negocio_local": { "roas_min": 2.0, "cpa_max": 50 },
        "b2b": { "roas_min": 2.5, "cpa_max": 200 }
      },
      "ticket_medio": {
        "baixo": { "roas_min": 4.0, "cpa_max": 30 },
        "medio": { "roas_min": 3.0, "cpa_max": 100 },
        "alto": { "roas_min": 2.0, "cpa_max": 300 }
      },
      "maturidade_conta": {
        "nova": { "ctr_min": 0.8, "cpc_max": 2.0 },
        "estabelecida": { "ctr_min": 1.5, "cpc_max": 1.0 },
        "otimizada": { "ctr_min": 2.0, "cpc_max": 0.5 }
      }
    }
  },

  "global_settings": {
    "default_period": 7,
    "available_periods": [1, 3, 7, 14, 28, 30, 60, 90],
    "comparison_periods": ["previous_period", "same_period_last_month", "same_period_last_year"],
    "currency": "BRL",
    "timezone": "America/Sao_Paulo",
    "number_format": "pt-BR",
    "decimal_places": {
      "currency": 2,
      "percentage": 1,
      "decimal": 2,
      "number": 0
    }
  },

  "database_mapping": {
    "table_name": "j_rep_metaads_bronze",
    "primary_key": ["account_id", "campaign_id", "adset_id", "ad_id", "date"],
    "date_field": "date",
    "aggregation_rules": {
      "sum": ["spend", "impressions", "clicks", "link_clicks"],
      "sum_unique": ["reach"],
      "average_weighted": ["frequency", "cpm", "cpc", "ctr"],
      "last": ["status"],
      "max": ["actions_purchase", "action_values_omni_purchase"]
    }
  }
}